<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Carta</title>

  <style>
    :root{
      --bg:#8e3d9b;
      --stroke:#000;
      --glow:rgba(255,255,255,.55);

      --paper1:#f7f0e3;
      --paper2:#e6d6b8;
      --paper3:#c9ab7b;
      --ink:#2b1f14;

      --btnBg: rgba(255,255,255,.18);
      --btnBd: rgba(255,255,255,.35);
    }

    *{ box-sizing:border-box; margin:0; padding:0; }

    body{
      min-height:100vh;
      background:var(--bg);
      font-family: Arial, Helvetica, sans-serif;
      overflow-x:hidden;
      color:#111;
    }

    .wrap{
      min-height:100vh;
      display:grid;
      grid-template-columns: 1fr 1.2fr;
      gap: 28px;
      padding: 28px;
      align-items:center;
    }

    /* ================= IZQUIERDA: MUÑECO + COPOS ================= */
    .leftSide{
      position:relative;
      height:min(760px, 92vh);
      border-radius:22px;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* Copos */
    .snow{
      position:absolute;
      inset:0;
      overflow:hidden;
      pointer-events:none;
    }
    .flake{
      position:absolute;
      top:-40px;
      width:10px;
      height:10px;
      border-radius:50%;
      background:rgba(255,255,255,.95);
      filter: drop-shadow(0 0 12px rgba(255,255,255,.45));
      opacity:.95;
      animation: fall linear infinite;
    }
    .flake::before,.flake::after{
      content:"";
      position:absolute;
      left:50%;
      top:50%;
      width:26px;
      height:2px;
      background:rgba(255,255,255,.95);
      transform:translate(-50%,-50%);
      border-radius:2px;
    }
    .flake::after{ transform:translate(-50%,-50%) rotate(90deg); }

    @keyframes fall{
      from { transform: translateY(-50px) rotate(0deg); }
      to   { transform: translateY(860px) rotate(180deg); }
    }

    /* Botón volver */
    .backBtn{
      position:absolute;
      left:50%;
      bottom: 16px;
      transform:translateX(-50%);
      padding:10px 14px;
      border-radius:999px;
      background: var(--btnBg);
      border: 2px solid var(--btnBd);
      color:#fff;
      text-decoration:none;
      font-weight:800;
      backdrop-filter: blur(6px);
    }
    .backBtn:hover{ background: rgba(255,255,255,.25); }

    /* ================= DERECHA: ROLLO + PERGAMINO ================= */
    .rightSide{
      display:flex;
      justify-content:center;
      align-items:center;
    }

    .panel{
      width: min(860px, 96vw);
      border: 4px solid rgba(0,0,0,.35);
      border-radius: 26px;
      background: rgba(255,255,255,.10);
      box-shadow:
        0 0 0 6px rgba(255,255,255,.18),
        0 0 34px var(--glow),
        0 22px 45px rgba(0,0,0,.25);
      padding: 18px;
      position:relative;
    }

    /* Escena del rollo */
    .scrollStage{
      position:relative;
      width:min(720px, 95%);
      margin: 0 auto;
      padding: 14px 0;
    }

    /* El botón (solo el rollo, sin letras) */
    .rollBtn{
      border:0;
      background:transparent;
      cursor:pointer;
      padding:0;
      display:block;
      margin: 0 auto;
      width: 100%;
      max-width: 700px;
      transition: transform .12s ease;
    }
    .rollBtn:hover{ transform: scale(1.01); }
    .rollBtn:active{ transform: scale(.995); }

    /* ========== ROLLO CERRADO (dibujo CSS) ========== */
    .rollClosed{
      position:relative;
      height: 160px;
      border-radius: 22px;
      overflow:hidden;

      /* base "madera/papel" */
      background: linear-gradient(180deg, rgba(255,255,255,.25), rgba(0,0,0,.04));
      box-shadow:
        inset 0 0 0 2px rgba(0,0,0,.06),
        0 18px 40px rgba(0,0,0,.25);
    }

    /* cilindro del rollo (centro) */
    .rollClosed .core{
      position:absolute;
      left:50%;
      top:50%;
      transform:translate(-50%,-50%);
      width: 72%;
      height: 85px;
      border-radius: 999px;

      background: linear-gradient(90deg,
        var(--paper3),
        var(--paper2) 18%,
        var(--paper1) 50%,
        var(--paper2) 82%,
        var(--paper3)
      );

      box-shadow:
        0 0 0 2px rgba(0,0,0,.18),
        0 0 30px rgba(255,255,255,.18);
    }

    /* bordes enrollados */
    .rollClosed .cap{
      position:absolute;
      top:50%;
      width: 92px;
      height: 92px;
      border-radius: 50%;
      transform: translateY(-50%);
      background: radial-gradient(circle at 35% 35%,
        #fff 0%,
        var(--paper1) 26%,
        var(--paper2) 55%,
        var(--paper3) 100%
      );
      box-shadow:
        0 0 0 2px rgba(0,0,0,.2),
        0 10px 25px rgba(0,0,0,.25);
    }
    .rollClosed .cap.left{ left: 10%; }
    .rollClosed .cap.right{ right: 10%; }

    /* cuerdita */
    .rollClosed .string{
      position:absolute;
      left:50%;
      top:50%;
      transform:translate(-50%,-50%);
      width: 42%;
      height: 10px;
      border-radius:999px;
      background: linear-gradient(90deg, #7c4a2a, #b06c3f, #7c4a2a);
      box-shadow: 0 0 0 2px rgba(0,0,0,.18);
      opacity:.95;
    }
    .rollClosed .knot{
      position:absolute;
      left:50%;
      top:50%;
      transform:translate(-50%,-50%);
      width: 34px;
      height: 34px;
      border-radius: 10px;
      background: linear-gradient(180deg, #b06c3f, #7c4a2a);
      box-shadow: 0 0 0 2px rgba(0,0,0,.18);
    }

    /* ========== PERGAMINO ABIERTO (dibujo CSS) ========== */
    .parchment{
      display:none;
      position:relative;
      margin-top: 14px;
      border-radius: 22px;
      overflow:hidden;
      box-shadow:
        0 20px 55px rgba(0,0,0,.30),
        0 0 34px rgba(255,255,255,.18);
      border: 2px solid rgba(0,0,0,.18);
    }

    /* textura de papel */
    .paper{
      position:relative;
      padding: 34px 30px;
      background:
        radial-gradient(circle at 20% 20%, rgba(0,0,0,.03), transparent 45%),
        radial-gradient(circle at 80% 30%, rgba(0,0,0,.035), transparent 50%),
        radial-gradient(circle at 30% 80%, rgba(0,0,0,.03), transparent 45%),
        linear-gradient(180deg, #fff7ea, #f0e1c4 55%, #e7d1ab);
    }

    /* bordes “rotos” tipo pergamino */
    .paper::before{
      content:"";
      position:absolute;
      inset:0;
      pointer-events:none;
      background:
        radial-gradient(12px 12px at 8% 0%, rgba(0,0,0,.12) 0 45%, transparent 46%),
        radial-gradient(14px 14px at 16% 0%, rgba(0,0,0,.09) 0 40%, transparent 41%),
        radial-gradient(12px 12px at 24% 0%, rgba(0,0,0,.10) 0 42%, transparent 43%),
        radial-gradient(14px 14px at 34% 0%, rgba(0,0,0,.08) 0 38%, transparent 39%),
        radial-gradient(12px 12px at 46% 0%, rgba(0,0,0,.11) 0 42%, transparent 43%),
        radial-gradient(14px 14px at 58% 0%, rgba(0,0,0,.08) 0 38%, transparent 39%),
        radial-gradient(12px 12px at 70% 0%, rgba(0,0,0,.10) 0 42%, transparent 43%),
        radial-gradient(14px 14px at 82% 0%, rgba(0,0,0,.08) 0 38%, transparent 39%),
        radial-gradient(12px 12px at 92% 0%, rgba(0,0,0,.10) 0 42%, transparent 43%),

        radial-gradient(12px 12px at 8% 100%, rgba(0,0,0,.12) 0 45%, transparent 46%),
        radial-gradient(14px 14px at 18% 100%, rgba(0,0,0,.09) 0 40%, transparent 41%),
        radial-gradient(12px 12px at 28% 100%, rgba(0,0,0,.10) 0 42%, transparent 43%),
        radial-gradient(14px 14px at 40% 100%, rgba(0,0,0,.08) 0 38%, transparent 39%),
        radial-gradient(12px 12px at 54% 100%, rgba(0,0,0,.11) 0 42%, transparent 43%),
        radial-gradient(14px 14px at 68% 100%, rgba(0,0,0,.08) 0 38%, transparent 39%),
        radial-gradient(12px 12px at 80% 100%, rgba(0,0,0,.10) 0 42%, transparent 43%),
        radial-gradient(14px 14px at 90% 100%, rgba(0,0,0,.08) 0 38%, transparent 39%);

      opacity:.25;
      mix-blend-mode:multiply;
    }

    /* “rollitos” laterales para que parezca pergamino abierto */
    .parchment .sideRoll{
      position:absolute;
      top:0;
      bottom:0;
      width: 70px;
      background: linear-gradient(90deg, var(--paper3), var(--paper2), var(--paper1));
      opacity:.95;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.12);
    }
    .parchment .sideRoll.left{ left:0; }
    .parchment .sideRoll.right{ right:0; transform: scaleX(-1); }

    /* Texto elegante */
    .letter{
      position:relative;
      color: var(--ink);
      line-height: 1.65;
      font-size: 18px;
      white-space: pre-line;
      font-family: Georgia, "Palatino Linotype", "Book Antiqua", Palatino, serif;
      padding-left: 56px;
      padding-right: 56px;
      text-shadow: 0 1px 0 rgba(255,255,255,.35);
    }

    /* Botón cerrar (chiquito) */
    .closeRow{
      display:flex;
      justify-content:center;
      margin-top: 12px;
    }
    .miniBtn{
      border: 2px solid rgba(255,255,255,.35);
      background: rgba(0,0,0,.18);
      color:#fff;
      padding: 10px 14px;
      border-radius: 999px;
      cursor:pointer;
      font-weight:800;
      backdrop-filter: blur(6px);
    }
    .miniBtn:hover{ background: rgba(0,0,0,.25); }

    /* ========== ANIMACIÓN “DESENROLLAR” ========== */
    .opening .rollClosed{
      animation: rollAway .45s ease forwards;
    }
    @keyframes rollAway{
      to{ transform: translateY(-6px) scale(.96); opacity:0; height:0; }
    }

    .opening .parchment{
      display:block;
      animation: unroll .55s ease-out forwards;
      transform-origin: top center;
    }
    @keyframes unroll{
      from{ transform: translateY(10px) scaleY(.08); opacity:.0; }
      to{ transform: translateY(0) scaleY(1); opacity:1; }
    }

    /* ================= RESPONSIVE ================= */
    @media (max-width: 980px){
      .wrap{ grid-template-columns: 1fr; }
      .leftSide{ height: 520px; }
      .letter{ font-size: 16px; padding-left: 48px; padding-right: 48px; }
    }

    @media (prefers-reduced-motion: reduce){
      .flake{ animation:none; }
      .opening .rollClosed,
      .opening .parchment{ animation:none; }
    }
  </style>
</head>

<body>
  <div class="wrap">

    <!-- IZQUIERDA -->
    <section class="leftSide">
      <div class="snow" aria-hidden="true">
        <div class="flake" style="left:8%;  animation-duration:7s;  animation-delay:-1s;"></div>
        <div class="flake" style="left:18%; animation-duration:9s;  animation-delay:-4s;"></div>
        <div class="flake" style="left:32%; animation-duration:8s;  animation-delay:-2s;"></div>
        <div class="flake" style="left:46%; animation-duration:10s; animation-delay:-6s;"></div>
        <div class="flake" style="left:60%; animation-duration:7.5s;animation-delay:-3s;"></div>
        <div class="flake" style="left:74%; animation-duration:9.5s;animation-delay:-5s;"></div>
        <div class="flake" style="left:88%; animation-duration:8.5s;animation-delay:-2.5s;"></div>
      </div>

      <!-- MUÑECO DE NIEVE “más real” hecho en SVG -->
      <svg width="520" height="560" viewBox="0 0 520 560" role="img" aria-label="Muñeco de nieve" style="max-width:92%; height:auto; filter: drop-shadow(0 24px 55px rgba(0,0,0,.28));">
        <defs>
          <radialGradient id="snowGrad" cx="35%" cy="30%" r="70%">
            <stop offset="0%" stop-color="#ffffff"/>
            <stop offset="55%" stop-color="#f2f6fb"/>
            <stop offset="100%" stop-color="#d9e4ef"/>
          </radialGradient>

          <radialGradient id="shadowGrad" cx="50%" cy="50%" r="60%">
            <stop offset="0%" stop-color="rgba(0,0,0,.35)"/>
            <stop offset="100%" stop-color="rgba(0,0,0,0)"/>
          </radialGradient>

          <linearGradient id="hatGrad" x1="0" x2="0" y1="0" y2="1">
            <stop offset="0%" stop-color="#2b2b2b"/>
            <stop offset="100%" stop-color="#111"/>
          </linearGradient>

          <linearGradient id="scarfGrad" x1="0" x2="1" y1="0" y2="0">
            <stop offset="0%" stop-color="#ff4e7a"/>
            <stop offset="100%" stop-color="#ff9bb6"/>
          </linearGradient>
        </defs>

        <!-- sombra en el suelo -->
        <ellipse cx="260" cy="520" rx="170" ry="35" fill="url(#shadowGrad)" opacity=".55"/>

        <!-- cuerpo -->
        <ellipse cx="260" cy="360" rx="190" ry="175" fill="url(#snowGrad)" stroke="rgba(0,0,0,.35)" stroke-width="4"/>
        <!-- barriga “volumen” -->
        <ellipse cx="220" cy="330" rx="105" ry="95" fill="rgba(255,255,255,.45)"/>

        <!-- cabeza -->
        <ellipse cx="260" cy="170" rx="125" ry="115" fill="url(#snowGrad)" stroke="rgba(0,0,0,.35)" stroke-width="4"/>
        <ellipse cx="230" cy="145" rx="65" ry="55" fill="rgba(255,255,255,.45)"/>

        <!-- sombrero -->
        <g>
          <rect x="160" y="55" width="200" height="70" rx="18" fill="url(#hatGrad)" stroke="rgba(0,0,0,.55)" stroke-width="4"/>
          <rect x="190" y="10" width="140" height="70" rx="18" fill="url(#hatGrad)" stroke="rgba(0,0,0,.55)" stroke-width="4"/>
        </g>

        <!-- brazos (palitos) -->
        <g stroke="#5b3b25" stroke-width="7" stroke-linecap="round">
          <path d="M95 320 C 130 310, 160 300, 190 285" />
          <path d="M425 320 C 390 310, 360 300, 330 285" />
          <!-- ramitas -->
          <path d="M190 285 C 180 270, 170 265, 162 258" stroke-width="5"/>
          <path d="M330 285 C 340 270, 350 265, 358 258" stroke-width="5"/>
        </g>

        <!-- bufanda -->
        <g>
          <path d="M150 220 C 195 250, 325 250, 370 220
                   C 350 270, 170 270, 150 220 Z"
                fill="url(#scarfGrad)" opacity=".95" stroke="rgba(0,0,0,.25)" stroke-width="3"/>
          <path d="M300 255 C 320 290, 325 340, 300 370
                   C 270 345, 270 295, 300 255 Z"
                fill="url(#scarfGrad)" opacity=".95" stroke="rgba(0,0,0,.25)" stroke-width="3"/>
        </g>

        <!-- cara -->
        <g fill="#111">
          <circle cx="220" cy="165" r="8"/>
          <circle cx="300" cy="165" r="8"/>
        </g>

        <!-- nariz zanahoria -->
        <path d="M260 185 L 330 205 L 260 220 Z" fill="#ff7a00" stroke="rgba(0,0,0,.25)" stroke-width="2"/>

        <!-- sonrisa -->
        <path d="M235 222 C 250 238, 270 238, 285 222" fill="none" stroke="#111" stroke-width="4" stroke-linecap="round"/>

        <!-- botones -->
        <g fill="#111">
          <circle cx="260" cy="320" r="7"/>
          <circle cx="260" cy="355" r="7"/>
          <circle cx="260" cy="390" r="7"/>
        </g>
      </svg>

      <a class="backBtn" href="index.html">⬅ Volver</a>
    </section>

    <!-- DERECHA -->
    <section class="rightSide">
      <div class="panel">
        <div class="scrollStage" id="stage">

          <!-- ROLLO CERRADO (sin letras) -->
          <button class="rollBtn" id="openBtn" aria-label="Abrir carta">
            <div class="rollClosed" id="rollClosed">
              <div class="cap left"></div>
              <div class="cap right"></div>
              <div class="core"></div>
              <div class="string"></div>
              <div class="knot"></div>
            </div>
          </button>

          <!-- PERGAMINO ABIERTO -->
          <div class="parchment" id="parchment">
            <div class="sideRoll left"></div>
            <div class="sideRoll right"></div>
            <div class="paper">
              <div class="letter">
Olaa

Quería desearte una feliz Navidad.
Es la primera vez que hago algo así por una persona, normalmente solo digo feliz navidad, ojalá vivas otro año xd, pero esta vez quise hacerlo diferente.

De verdad espero que la estés pasando muy bonito con tu familia, rodeada de cariño, risas y buenos momentos.
Ojalá estés comiendo rico, repitiendo plato sin culpa JAJA
Este año puede que no haya sido bueno, pero quedate con lo que te hizo sonreír, y que lo demás se quede atrás. 

Y bueno… ojalá Papá Noel se porte bien contigo y te traiga otro celular nuevo y no carbon ugu.
Bueno sin nada mas que decir que el próximo año venga con cosas grandes para ti.

Atte: FFF 
              </div>
            </div>

            <div class="closeRow">
              <button class="miniBtn" id="closeBtn">Cerrar</button>
            </div>
          </div>

        </div>
      </div>
    </section>

  </div>

  <script>
    const stage = document.getElementById('stage');
    const openBtn = document.getElementById('openBtn');
    const parchment = document.getElementById('parchment');
    const closeBtn = document.getElementById('closeBtn');

    function openLetter(){
      stage.classList.add('opening');
      // mostrar pergamino (display lo maneja CSS con .opening)
      setTimeout(() => {
        parchment.scrollIntoView({behavior:'smooth', block:'center'});
      }, 200);
    }

    function closeLetter(){
      stage.classList.remove('opening');
      setTimeout(() => {
        openBtn.scrollIntoView({behavior:'smooth', block:'center'});
      }, 150);
    }

    openBtn.addEventListener('click', openLetter);
    closeBtn.addEventListener('click', closeLetter);
  </script>
</body>
</html>
